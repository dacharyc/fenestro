	<html>
		<head>
			<title>app.go</title>
			<style>
			body{
	background: rgb(36,36,36);
	color: rgb(163,160,165);
	/* a dim, but visible grey(ish) */
}
.diff {
	display: table;
	width: 100%;
}
.pre {
	font-family: monospace;
	white-space: pre;
}
.line{
	clear: left;
	display:table-row;
}
.unchanged {
	display: none;
}
.expanded{
	display: table-row;
	background: #313131;
}
label {
	display: inline-block;
	cursor: pointer;
	color: #F3D39D;
}
input[type=checkbox] {
	display: none;
}
#unchanged_checkbox:checked ~ * .unchanged {
	display: table-row;
	background: #313131;
}
.linenums{
	margin-right: 1rem;
	padding-right: 0.5rem;
	border-right: solid 1px #ccc;
	text-align: right;
	color: rgb(255,222,165);
	width:7em;
	text-overflow: ellipsis;
	display:table-cell;
	cursor: pointer;
}
.source{
	margin-left: 1rem;
	padding-left: 0.5rem;
	display:table-cell;
}
.bold {font-style: bold;}
.green { color: #79DB73;}
.red { color: #f1a340;}
.filename { 
	color: rgba(115, 120, 144, 1);
	font-family: sans-serif;
	font-size: 120%;
	padding-left: 6em;
	border-bottom: solid 1px rgba(115, 120, 144, 1);
}

.chrome {
	padding: 0.25rem 0.5rem 0.25rem 0.5rem;
	background: rgba(235,235,235,0.85);
	border-bottom: 1px solid rgba(0,0,0,0.1);
	text-align: left;
	width: 100%;
	position: relative;
	left: -8;
	top: -8;
}

label {
	max-height: 20px;
}

#unchanged_toggle{
	width: 30px;
	margin-top: -20px;
	float: left;
	margin-right: 1em;
}
#unchanged_toggle g path {
	fill: #F3D39D;
}
			</style>
			<script language="JavaScript">
				var defaultClickExpansionSize = 10;

function getChildren(node, skipMe){
	var r = [];
	for ( ; node; node = node.nextSibling ) {
		if ( node.nodeType == 1 && node != skipMe){
			r.push( node );
		}
	}
	return r;
};

function getChildrenUpTo(node, stopAt){
	var r = [];
	for ( ; node; node = node.nextSibling ) {
		if ( node.nodeType == 1 && node != stopAt) {
			if (node.classList[0] == "line") {
			// ^^ only to compensate for bug in bash version's source html
				r.push( node );
			}
		} else if ( node == stopAt) {
			break;
		}
	}
	return r;
}
function getLaterNSiblings(node, n){
	var r = [];
	for ( ; node; node = node.nextSibling ) {
		if ( r.length < n && node.nodeType == 1) {
			// nodeType 3 is Text 1 is element. 
			r.push( node )
		} else if (r.length == n) {
			break;
		}
	}
	return r;
}


function getSiblings(n) {
	return getChildren(n.parentNode.firstChild, n);
}
function getEarlierSiblings(n){
	return getChildrenUpTo(n.parentNode.firstChild, n);
}

function getPreviousNSiblings(node, count){
	return getEarlierSiblings(node).slice((count * -1));
}

function expandPreviousSiblings(node, how_many){
	var predecessors = getPreviousNSiblings(node, how_many);
	for (var x = predecessors.length -1; x > -1 ; x--){
		expandNodeIfUnchanged(predecessors[x]);
	}
}
function expandLaterSiblings(node, how_many){
	var antecessors = getLaterNSiblings(node, how_many);
	for (var x = 0; x < antecessors.length; x++){
		expandNodeIfUnchanged( antecessors[x])
	}
}
function expandNodeIfUnchanged(node){
	if (typeof(node) != "undefined" && node.nodeType == 1){
		if (node.className.indexOf("unchanged") > -1) {
			node.className = node.className + " expanded";
		}
	}
}

function getAllAnchors(){
	return document.getElementsByClassName("linenum_link");
}

function getChangedLineDivs(){
	var all_lines = document.getElementsByClassName("line");
	var changed_lines = [];
	for (var x = 0; x < all_lines.length; x++){
		var node = all_lines[x];
		if (node.className.indexOf("unchanged") == -1) {
			changed_lines.push(node);
		}
	}
	return changed_lines;
}
function addOnClickToAnchors(number_anchors){
	for (var x = 0; x < number_anchors.length; x++){
		var anchor = number_anchors[x]
		anchor.addEventListener("click",
			function(){expandPreviousSiblings(this.parentNode.parentNode,
				defaultClickExpansionSize)}, false);
	}
}
function expandAroundChangedLines(){
	var changed_lines = getChangedLineDivs();
	for (var x = 0; x < changed_lines.length; x++){
		var node = changed_lines[x]
		expandPreviousSiblings(node, 5);
		expandLaterSiblings(node, 5);
	}
}

function activateAnchors(){
	var number_anchors = getAllAnchors();
	addOnClickToAnchors(number_anchors);
	expandAroundChangedLines();
}

Array.prototype.first = function(){
	if (this.length > 1){
		return this[0];
	}
	return null;
}

Array.prototype.rest = function(){
	if (this.length > 1){
		return this.slice(1)
	}
	return new Array();
}
			</script>
		</head>
		<body>
			<input type="checkbox" id="unchanged_checkbox">
			<div class="filename">
				<label for="unchanged_checkbox">
            <svg id="unchanged_toggle" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0" y="0" width="100" height="63" viewBox="0, 0, 100, 63">
  <g id="Layer_1">
    <path d="M58.6,29 L66.7,20.9 C68.3,23.7 69.2,27 69.2,30.4 C69.2,41 60.6,49.6 50,49.6 C46.5,49.6 43.3,48.7 40.5,47.1 L48.4,39.2 C48.8,39.2 49.1,39.3 49.5,39.3 C54.6,39.3 58.7,35.2 58.7,30.1 C58.7,29.7 58.7,29.4 58.6,29 z M58.7,30.1 C58.7,35.2 54.6,39.3 49.5,39.3 C49.1,39.3 48.8,39.3 48.4,39.2 L40.5,47.1 C43.3,48.7 46.6,49.6 50,49.6 C60.6,49.6 69.2,41 69.2,30.4 C69.2,26.9 68.3,23.7 66.7,20.9 L58.6,29 C58.7,29.4 58.7,29.7 58.7,30.1 z M100,30.3 C100,30.3 100,30.2 100,30.2 C100,30.2 100,30.2 100,30.1 C100,30.1 100,30 100,30 C100,30 100,29.9 100,29.9 C100,29.9 100,29.9 100,29.9 C99.9,29.3 99.7,28.8 99.3,28.3 C99.2,28.1 99.1,28 98.9,27.9 C95.7,24.1 91.9,20.8 88.1,17.7 C87.3,17.1 86.5,16.5 85.7,15.9 C85.6,15.8 85.5,15.7 85.3,15.6 C84.5,15 83.7,14.4 82.8,13.8 C82.8,13.8 82.7,13.8 82.7,13.7 C80.9,12.5 79.1,11.3 77.3,10.3 L66.7,21 C68.3,23.8 69.2,27.1 69.2,30.5 C69.2,41.1 60.6,49.7 50,49.7 C46.5,49.7 43.3,48.8 40.5,47.2 L32.3,55.4 C33.5,55.9 34.8,56.3 36.1,56.7 C36.1,56.7 36.2,56.7 36.2,56.7 C36.8,56.9 37.4,57 38,57.2 C38.1,57.2 38.2,57.3 38.3,57.3 C39,57.5 39.6,57.6 40.3,57.8 C44.8,58.8 49.4,59 54,58.7 C55.5,58.6 57,58.4 58.6,58.1 C62.1,57.5 65.5,56.4 68.7,55.1 C70.7,54.3 72.6,53.4 74.5,52.5 C77.4,51 80.3,49.3 83,47.4 C84.8,46.1 86.6,44.8 88.3,43.4 C90.9,41.3 93.3,39.1 95.7,36.8 C96.9,35.7 98,34.5 99,33.2 C99.3,32.9 99.5,32.6 99.7,32.3 C99.9,32 100,31.6 100.1,31.2 C100.1,31.2 100.1,31.2 100.1,31.2 C100.1,31.2 100.1,31.1 100.1,31.1 C100.1,31.1 100.1,31 100.1,31 C100.1,31 100.1,31 100.1,30.9 C100.1,30.9 100.1,30.8 100.1,30.8 C100.1,30.7 100.1,30.7 100.1,30.6 C100.1,30.5 100,30.4 100,30.3 z M58.7,30.1 C58.7,29.7 58.7,29.4 58.6,29 L48.4,39.2 C48.8,39.2 49.1,39.3 49.5,39.3 C54.6,39.3 58.7,35.2 58.7,30.1 z M48.4,39.2 L58.6,29 L66.7,20.9 L77.4,10.2 L84.8,2.8 C85.4,2.2 85.4,1.3 84.8,0.7 C84.2,0.1 83.3,0.1 82.7,0.7 L23,60.4 C22.4,61 22.4,61.9 23,62.5 C23.3,62.8 23.7,62.9 24.1,62.9 C24.5,62.9 24.9,62.8 25.2,62.5 L32.4,55.3 L40.6,47.1 L48.4,39.2 z" fill="#000000"/>
    <path d="M67.8,5.7 C65.2,4.7 62.5,3.9 59.8,3.3 C53.7,2 47.6,1.9 41.5,3 C36,4 30.6,6.1 25.6,8.6 C17.8,12.6 10.6,18.1 4.4,24.3 C3.2,25.4 2.1,26.6 1.1,27.9 C-0.3,29.6 -0.3,31.5 1.1,33.2 C4.3,37 8.1,40.3 11.9,43.4 C15.3,46.1 18.9,48.6 22.7,50.8 L67.8,5.7 z" fill="#000000"/>
  </g>
</svg>
			app.go
				</label>
			</div>
			<div class="diff"><div><span>
			<!-- last two to compensate for sedness --></span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='1:1'>1:1</a></span><span class='source'>package main
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='2:2'>2:2</a></span><span class='source'>
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='3:3'>3:3</a></span><span class='source'>import (
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='4:4'>4:4</a></span><span class='source'>	&quot;context&quot;
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='5:5'>5:5</a></span><span class='source'>	&quot;sync&quot;
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='6:6'>6:6</a></span><span class='source'>
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='7:7'>7:7</a></span><span class='source'>	&quot;github.com/wailsapp/wails/v2/pkg/runtime&quot;
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='8:8'>8:8</a></span><span class='source'>)
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='9:9'>9:9</a></span><span class='source'>
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='10:10'>10:10</a></span><span class='source'>// App struct holds the application state
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='11:11'>11:11</a></span><span class='source'>type App struct {
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='12:12'>12:12</a></span><span class='source'>	ctx          context.Context
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='13:13'>13:13</a></span><span class='source'>	files        []FileEntry
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='14:14'>14:14</a></span><span class='source'>	currentIndex int
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='15:15'>15:15</a></span><span class='source'>	windowID     string
</span></div>
			<div class='line pre'><span class='linenums'><a class='linenum_link' name='16:16'>16:16</a></span><span class='source'>	<span class="bold green ">config       Config</span>
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='16:17'>16:17</a></span><span class='source'>	mu           sync.RWMutex
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='17:18'>17:18</a></span><span class='source'>}
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='18:19'>18:19</a></span><span class='source'>
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='19:20'>19:20</a></span><span class='source'>// NewApp creates a new App with the given initial file
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='20:21'>20:21</a></span><span class='source'>func NewApp(file FileEntry, windowID string) *App {
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='21:22'>21:22</a></span><span class='source'>	return &amp;App{
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='22:23'>22:23</a></span><span class='source'>		files:        []FileEntry{file},
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='23:24'>23:24</a></span><span class='source'>		currentIndex: 0,
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='24:25'>24:25</a></span><span class='source'>		windowID:     windowID,
</span></div>
			<div class='line pre'><span class='linenums'><a class='linenum_link' name='25:26'>25:26</a></span><span class='source'>		<span class="bold green ">config:       LoadConfig(),</span>
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='25:27'>25:27</a></span><span class='source'>	}
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='26:28'>26:28</a></span><span class='source'>}
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='27:29'>27:29</a></span><span class='source'>
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='28:30'>28:30</a></span><span class='source'>// startup is called when the app starts
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='29:31'>29:31</a></span><span class='source'>func (a *App) startup(ctx context.Context) {
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='30:32'>30:32</a></span><span class='source'>	a.ctx = ctx
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='31:33'>31:33</a></span><span class='source'>}
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='32:34'>32:34</a></span><span class='source'>
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='33:35'>33:35</a></span><span class='source'>// GetHTMLContent returns the HTML content of the currently selected file
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='34:36'>34:36</a></span><span class='source'>// This is called from the frontend to get the initial content
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='35:37'>35:37</a></span><span class='source'>func (a *App) GetHTMLContent() string {
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='36:38'>36:38</a></span><span class='source'>	a.mu.RLock()
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='37:39'>37:39</a></span><span class='source'>	defer a.mu.RUnlock()
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='38:40'>38:40</a></span><span class='source'>	if len(a.files) == 0 || a.currentIndex &lt; 0 || a.currentIndex &gt;= len(a.files) {
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='39:41'>39:41</a></span><span class='source'>		return &quot;&quot;
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='40:42'>40:42</a></span><span class='source'>	}
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='41:43'>41:43</a></span><span class='source'>	return a.files[a.currentIndex].Content
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='42:44'>42:44</a></span><span class='source'>}
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='43:45'>43:45</a></span><span class='source'>
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='44:46'>44:46</a></span><span class='source'>// GetFiles returns all files for the sidebar
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='45:47'>45:47</a></span><span class='source'>func (a *App) GetFiles() []FileEntry {
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='46:48'>46:48</a></span><span class='source'>	a.mu.RLock()
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='47:49'>47:49</a></span><span class='source'>	defer a.mu.RUnlock()
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='48:50'>48:50</a></span><span class='source'>	// Return a copy to avoid race conditions
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='49:51'>49:51</a></span><span class='source'>	result := make([]FileEntry, len(a.files))
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='50:52'>50:52</a></span><span class='source'>	copy(result, a.files)
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='51:53'>51:53</a></span><span class='source'>	return result
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='52:54'>52:54</a></span><span class='source'>}
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='53:55'>53:55</a></span><span class='source'>
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='54:56'>54:56</a></span><span class='source'>// GetCurrentIndex returns the index of the currently selected file
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='55:57'>55:57</a></span><span class='source'>func (a *App) GetCurrentIndex() int {
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='56:58'>56:58</a></span><span class='source'>	a.mu.RLock()
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='57:59'>57:59</a></span><span class='source'>	defer a.mu.RUnlock()
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='58:60'>58:60</a></span><span class='source'>	return a.currentIndex
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='59:61'>59:61</a></span><span class='source'>}
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='60:62'>60:62</a></span><span class='source'>
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='61:63'>61:63</a></span><span class='source'>// SelectFile switches to the file at the given index and returns its content
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='62:64'>62:64</a></span><span class='source'>func (a *App) SelectFile(index int) string {
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='63:65'>63:65</a></span><span class='source'>	a.mu.Lock()
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='64:66'>64:66</a></span><span class='source'>	defer a.mu.Unlock()
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='65:67'>65:67</a></span><span class='source'>	if index &lt; 0 || index &gt;= len(a.files) {
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='66:68'>66:68</a></span><span class='source'>		return &quot;&quot;
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='67:69'>67:69</a></span><span class='source'>	}
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='68:70'>68:70</a></span><span class='source'>	a.currentIndex = index
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='69:71'>69:71</a></span><span class='source'>	return a.files[index].Content
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='70:72'>70:72</a></span><span class='source'>}
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='71:73'>71:73</a></span><span class='source'>
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='72:74'>72:74</a></span><span class='source'>// AddFile adds a new file to the sidebar and emits an event to the frontend
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='73:75'>73:75</a></span><span class='source'>func (a *App) AddFile(entry FileEntry) {
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='74:76'>74:76</a></span><span class='source'>	a.mu.Lock()
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='75:77'>75:77</a></span><span class='source'>	a.files = append(a.files, entry)
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='76:78'>76:78</a></span><span class='source'>	sortFilesByName(a.files)
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='77:79'>77:79</a></span><span class='source'>	// Find the new index after sorting
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='78:80'>78:80</a></span><span class='source'>	newIndex := 0
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='79:81'>79:81</a></span><span class='source'>	for i, f := range a.files {
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='80:82'>80:82</a></span><span class='source'>		if f.Path == entry.Path &amp;&amp; f.Name == entry.Name {
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='81:83'>81:83</a></span><span class='source'>			newIndex = i
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='82:84'>82:84</a></span><span class='source'>			break
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='83:85'>83:85</a></span><span class='source'>		}
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='84:86'>84:86</a></span><span class='source'>	}
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='85:87'>85:87</a></span><span class='source'>	// Copy files while holding the lock to avoid race condition
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='86:88'>86:88</a></span><span class='source'>	filesCopy := make([]FileEntry, len(a.files))
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='87:89'>87:89</a></span><span class='source'>	copy(filesCopy, a.files)
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='88:90'>88:90</a></span><span class='source'>	a.mu.Unlock()
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='89:91'>89:91</a></span><span class='source'>
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='90:92'>90:92</a></span><span class='source'>	// Emit event to frontend
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='91:93'>91:93</a></span><span class='source'>	if a.ctx != nil {
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='92:94'>92:94</a></span><span class='source'>		runtime.EventsEmit(a.ctx, &quot;file-added&quot;, map[string]interface{}{
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='93:95'>93:95</a></span><span class='source'>			&quot;files&quot;: filesCopy,
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='94:96'>94:96</a></span><span class='source'>			&quot;index&quot;: newIndex,
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='95:97'>95:97</a></span><span class='source'>		})
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='96:98'>96:98</a></span><span class='source'>	}
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='97:99'>97:99</a></span><span class='source'>}
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='98:100'>98:100</a></span><span class='source'>
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='99:101'>99:101</a></span><span class='source'>// ReplaceFileContent replaces the content of a file by path, selects it, and emits an event
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='100:102'>100:102</a></span><span class='source'>// If the path is not found, adds it as a new file
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='101:103'>101:103</a></span><span class='source'>func (a *App) ReplaceFileContent(path, content, name string) {
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='102:104'>102:104</a></span><span class='source'>	a.mu.Lock()
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='103:105'>103:105</a></span><span class='source'>	found := false
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='104:106'>104:106</a></span><span class='source'>	for i, f := range a.files {
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='105:107'>105:107</a></span><span class='source'>		if f.Path == path {
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='106:108'>106:108</a></span><span class='source'>			a.files[i].Content = content
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='107:109'>107:109</a></span><span class='source'>			if name != &quot;&quot; {
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='108:110'>108:110</a></span><span class='source'>				a.files[i].Name = name
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='109:111'>109:111</a></span><span class='source'>			}
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='110:112'>110:112</a></span><span class='source'>			a.currentIndex = i
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='111:113'>111:113</a></span><span class='source'>			found = true
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='112:114'>112:114</a></span><span class='source'>			break
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='113:115'>113:115</a></span><span class='source'>		}
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='114:116'>114:116</a></span><span class='source'>	}
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='115:117'>115:117</a></span><span class='source'>	if !found {
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='116:118'>116:118</a></span><span class='source'>		// Add as new file
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='117:119'>117:119</a></span><span class='source'>		a.files = append(a.files, FileEntry{
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='118:120'>118:120</a></span><span class='source'>			Name:    name,
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='119:121'>119:121</a></span><span class='source'>			Path:    path,
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='120:122'>120:122</a></span><span class='source'>			Content: content,
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='121:123'>121:123</a></span><span class='source'>		})
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='122:124'>122:124</a></span><span class='source'>		sortFilesByName(a.files)
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='123:125'>123:125</a></span><span class='source'>		// Find index after sorting
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='124:126'>124:126</a></span><span class='source'>		for i, f := range a.files {
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='125:127'>125:127</a></span><span class='source'>			if f.Path == path {
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='126:128'>126:128</a></span><span class='source'>				a.currentIndex = i
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='127:129'>127:129</a></span><span class='source'>				break
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='128:130'>128:130</a></span><span class='source'>			}
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='129:131'>129:131</a></span><span class='source'>		}
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='130:132'>130:132</a></span><span class='source'>	}
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='131:133'>131:133</a></span><span class='source'>	// Copy data while holding the lock to avoid race condition
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='132:134'>132:134</a></span><span class='source'>	filesCopy := make([]FileEntry, len(a.files))
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='133:135'>133:135</a></span><span class='source'>	copy(filesCopy, a.files)
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='134:136'>134:136</a></span><span class='source'>	currentIndex := a.currentIndex
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='135:137'>135:137</a></span><span class='source'>	a.mu.Unlock()
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='136:138'>136:138</a></span><span class='source'>
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='137:139'>137:139</a></span><span class='source'>	// Emit event to frontend
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='138:140'>138:140</a></span><span class='source'>	if a.ctx != nil {
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='139:141'>139:141</a></span><span class='source'>		runtime.EventsEmit(a.ctx, &quot;content-replaced&quot;, map[string]interface{}{
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='140:142'>140:142</a></span><span class='source'>			&quot;files&quot;:        filesCopy,
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='141:143'>141:143</a></span><span class='source'>			&quot;currentIndex&quot;: currentIndex,
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='142:144'>142:144</a></span><span class='source'>		})
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='143:145'>143:145</a></span><span class='source'>	}
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='144:146'>144:146</a></span><span class='source'>}
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='145:147'>145:147</a></span><span class='source'>
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='146:148'>146:148</a></span><span class='source'>// GetWindowID returns the window ID
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='147:149'>147:149</a></span><span class='source'>func (a *App) GetWindowID() string {
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='148:150'>148:150</a></span><span class='source'>	return a.windowID
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='149:151'>149:151</a></span><span class='source'>}
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='150:152'>150:152</a></span><span class='source'>
</span></div>
			<div class='line pre'><span class='linenums'><a class='linenum_link' name='150:153'>150:153</a></span><span class='source'><span class="bold green ">// GetConfig returns the application configuration</span>
</span></div>
			<div class='line pre'><span class='linenums'><a class='linenum_link' name='150:154'>150:154</a></span><span class='source'><span class="bold green ">func (a *App) GetConfig() Config {</span>
</span></div>
			<div class='line pre'><span class='linenums'><a class='linenum_link' name='150:155'>150:155</a></span><span class='source'><span class="bold green ">	return a.config</span>
</span></div>
			<div class='line pre'><span class='linenums'><a class='linenum_link' name='150:156'>150:156</a></span><span class='source'><span class="bold green ">}</span>
</span></div>
			<div class='line pre unchanged'><span class='linenums'><a class='linenum_link' name='150:157'>150:157</a></span><span class='source'>			</div>
		<script>
			activateAnchors();
		</script>
		</body>
	</html>
